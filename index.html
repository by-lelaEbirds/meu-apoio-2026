<!DOCTYPE html>
<html class="dark" lang="pt-BR">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport"/>
    <title>Meu Apoio 2026</title>
    <link href="https://fonts.googleapis.com/css2?family=Public+Sans:wght@400;600;700&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet"/>
    <script src="https://cdn.tailwindcss.com?plugins=forms"></script>
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#0f172a", "surface": "#1e293b", "accent": "#06b6d4",
                    },
                    fontFamily: { "display": ["Public Sans", "sans-serif"] }
                }
            }
        }
    </script>
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-primary text-slate-100 font-display pb-safe selection:bg-accent selection:text-primary">

    <header class="sticky top-0 z-50 bg-primary/95 backdrop-blur-md border-b border-white/10">
        <div class="flex items-center justify-between p-4">
            <div class="flex items-center gap-3">
                <div class="p-2 bg-gradient-to-br from-blue-600 to-cyan-500 rounded-lg shadow-lg">
                    <span class="material-symbols-outlined text-white">how_to_vote</span>
                </div>
                <h1 class="font-bold text-lg">Meu Apoio 2026</h1>
            </div>
            <button id="install-btn" class="hidden text-xs bg-white/10 px-3 py-1 rounded-full font-medium hover:bg-white/20">
                ðŸ“² Instalar App
            </button>
        </div>
        <div class="h-1 bg-surface w-full">
            <div id="progress-bar" class="h-full bg-accent w-1/3 transition-all duration-500"></div>
        </div>
    </header>

    <main class="max-w-md mx-auto md:max-w-2xl p-5 pb-24 relative min-h-screen">
        
        <section id="step-1" class="step-section">
            <h2 class="text-2xl font-bold mb-2">Escolha o Candidato</h2>
            <input id="search-input" class="w-full bg-surface border-0 rounded-xl py-3 px-4 mb-6 ring-1 ring-white/10 focus:ring-accent placeholder:text-slate-500" placeholder="Buscar polÃ­tico..." type="text"/>
            
            <div id="loading" class="text-center py-10 text-slate-500">Carregando candidatos...</div>
            <div id="template-grid" class="grid grid-cols-2 gap-4"></div>
        </section>

        <section id="step-2" class="step-section hidden">
            <button onclick="changeStep(1)" class="flex items-center text-slate-400 mb-4 hover:text-white"><span class="material-symbols-outlined text-sm mr-1">arrow_back</span> Voltar</button>
            
            <h2 class="text-2xl font-bold mb-4">Ajuste sua Foto</h2>

            <div class="flex gap-2 mb-4 p-1 bg-surface rounded-lg w-fit mx-auto border border-white/5">
                <button onclick="setFormat('square')" id="btn-square" class="format-btn active px-4 py-2 rounded-md text-sm font-medium transition-all">Quadrado (Feed)</button>
                <button onclick="setFormat('story')" id="btn-story" class="format-btn px-4 py-2 rounded-md text-sm font-medium transition-all text-slate-400">Vertical (Story)</button>
            </div>

            <div class="relative w-full bg-surface rounded-2xl overflow-hidden shadow-2xl border border-white/10 touch-none" id="canvas-container">
                <canvas id="editor-canvas" class="w-full h-full cursor-move"></canvas>
                
                <div id="upload-instruction" class="absolute inset-0 flex flex-col items-center justify-center bg-black/50 pointer-events-none">
                    <span class="material-symbols-outlined text-4xl mb-2">touch_app</span>
                    <p class="text-sm">Arraste e dÃª zoom para ajustar</p>
                </div>
                
                <label class="absolute bottom-4 right-4 bg-accent text-white p-3 rounded-full shadow-lg cursor-pointer hover:scale-110 transition-transform z-10">
                    <span class="material-symbols-outlined">add_a_photo</span>
                    <input type="file" id="file-input" accept="image/*" class="hidden">
                </label>
            </div>

            <div class="mt-4 flex items-center gap-3 px-2">
                <span class="material-symbols-outlined text-slate-400">zoom_out</span>
                <input type="range" id="zoom-slider" min="0.1" max="3" step="0.01" value="1" class="w-full accent-accent h-2 bg-surface rounded-lg appearance-none cursor-pointer">
                <span class="material-symbols-outlined text-slate-400">zoom_in</span>
            </div>

            <button onclick="finishEdit()" class="w-full mt-6 bg-gradient-to-r from-blue-600 to-cyan-500 text-white py-4 rounded-xl font-bold shadow-lg shadow-cyan-500/20 active:scale-95 transition-all">
                Gerar Imagem Oficial âœ¨
            </button>
        </section>

        <section id="step-3" class="step-section hidden text-center">
            <h2 class="text-2xl font-bold mb-2">Ficou Show! ðŸŽ‰</h2>
            <p class="text-slate-400 text-sm mb-6">Ajude a espalhar a mensagem.</p>
            
            <img id="final-result" class="w-full rounded-xl shadow-2xl border border-white/10 mb-6" alt="Resultado">
            
            <div class="grid gap-3">
                <button onclick="shareImage()" class="bg-[#25D366] hover:bg-[#20bd5a] text-white py-3.5 rounded-xl font-bold flex items-center justify-center gap-2 shadow-lg transition-all">
                    <span class="material-symbols-outlined">share</span> Compartilhar no Zap
                </button>
                <button onclick="downloadImage()" class="bg-surface hover:bg-white/10 text-white py-3.5 rounded-xl font-bold flex items-center justify-center gap-2 border border-white/10 transition-all">
                    <span class="material-symbols-outlined">download</span> Baixar Imagem
                </button>
                <button onclick="changeStep(1)" class="text-slate-400 text-sm mt-2 hover:text-white underline">Criar para outra pessoa</button>
            </div>
        </section>

    </main>

    <script src="script.js"></script>
</body>
</html>
